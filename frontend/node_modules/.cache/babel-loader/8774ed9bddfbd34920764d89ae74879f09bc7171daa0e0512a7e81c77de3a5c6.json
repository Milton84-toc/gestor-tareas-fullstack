{"ast":null,"code":"import _regenerator from \"C:/Users/USER/Desktop/fullstack-vue-tasks/frontend/node_modules/@babel/runtime/helpers/esm/regenerator.js\";\nimport _asyncToGenerator from \"C:/Users/USER/Desktop/fullstack-vue-tasks/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.array.find-index.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.object.define-property.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.string.trim.js\";\nimport { ref, onMounted } from \"vue\";\nimport TaskForm from \"@/components/TaskForm.vue\";\nimport api from \"@/services/api\";\nimport { logout } from \"@/stores/auth\";\nimport { useRouter } from \"vue-router\";\nexport default {\n  __name: 'DashboardView',\n  setup: function setup(__props, _ref) {\n    var __expose = _ref.expose;\n    __expose();\n    var tasks = ref([]);\n    var router = useRouter();\n\n    // Modal\n    var modalAbierto = ref(false);\n    var tareaEdit = ref({\n      id: null,\n      titulo: \"\"\n    });\n\n    // Funciones principales\n    function cargar() {\n      return _cargar.apply(this, arguments);\n    }\n    function _cargar() {\n      _cargar = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee() {\n        var _yield$api$get, data;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              _context.n = 1;\n              return api.get(\"/tasks\");\n            case 1:\n              _yield$api$get = _context.v;\n              data = _yield$api$get.data;\n              tasks.value = data;\n            case 2:\n              return _context.a(2);\n          }\n        }, _callee);\n      }));\n      return _cargar.apply(this, arguments);\n    }\n    function crear(_x) {\n      return _crear.apply(this, arguments);\n    }\n    function _crear() {\n      _crear = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee2(payload) {\n        var _yield$api$post, data;\n        return _regenerator().w(function (_context2) {\n          while (1) switch (_context2.n) {\n            case 0:\n              _context2.n = 1;\n              return api.post(\"/tasks\", payload);\n            case 1:\n              _yield$api$post = _context2.v;\n              data = _yield$api$post.data;\n              tasks.value.unshift(data);\n            case 2:\n              return _context2.a(2);\n          }\n        }, _callee2);\n      }));\n      return _crear.apply(this, arguments);\n    }\n    function actualizar(_x2) {\n      return _actualizar.apply(this, arguments);\n    }\n    function _actualizar() {\n      _actualizar = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee3(payload) {\n        return _regenerator().w(function (_context3) {\n          while (1) switch (_context3.n) {\n            case 0:\n              _context3.n = 1;\n              return api.put(\"/tasks/\".concat(payload.id), payload);\n            case 1:\n              return _context3.a(2);\n          }\n        }, _callee3);\n      }));\n      return _actualizar.apply(this, arguments);\n    }\n    function confirmarEliminar(_x3) {\n      return _confirmarEliminar.apply(this, arguments);\n    } // Modal\n    function _confirmarEliminar() {\n      _confirmarEliminar = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee4(id) {\n        return _regenerator().w(function (_context4) {\n          while (1) switch (_context4.n) {\n            case 0:\n              if (!confirm(\"¿Seguro que deseas eliminar esta tarea?\")) {\n                _context4.n = 2;\n                break;\n              }\n              _context4.n = 1;\n              return api[\"delete\"](\"/tasks/\".concat(id));\n            case 1:\n              tasks.value = tasks.value.filter(function (t) {\n                return t.id !== id;\n              });\n            case 2:\n              return _context4.a(2);\n          }\n        }, _callee4);\n      }));\n      return _confirmarEliminar.apply(this, arguments);\n    }\n    function abrirModal(t) {\n      tareaEdit.value = {\n        id: t.id,\n        titulo: t.title\n      };\n      modalAbierto.value = true;\n    }\n    function guardarEdicion() {\n      return _guardarEdicion.apply(this, arguments);\n    }\n    function _guardarEdicion() {\n      _guardarEdicion = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee5() {\n        var _yield$api$put, data, i;\n        return _regenerator().w(function (_context5) {\n          while (1) switch (_context5.n) {\n            case 0:\n              if (tareaEdit.value.titulo.trim()) {\n                _context5.n = 1;\n                break;\n              }\n              return _context5.a(2, alert(\"El título no puede estar vacío\"));\n            case 1:\n              _context5.n = 2;\n              return api.put(\"/tasks/\".concat(tareaEdit.value.id), {\n                title: tareaEdit.value.titulo\n              });\n            case 2:\n              _yield$api$put = _context5.v;\n              data = _yield$api$put.data;\n              i = tasks.value.findIndex(function (t) {\n                return t.id === data.id;\n              });\n              if (i !== -1) tasks.value[i] = data;\n              modalAbierto.value = false;\n            case 3:\n              return _context5.a(2);\n          }\n        }, _callee5);\n      }));\n      return _guardarEdicion.apply(this, arguments);\n    }\n    function salir() {\n      logout();\n      router.push(\"/login\");\n    }\n    onMounted(cargar);\n    var __returned__ = {\n      tasks: tasks,\n      router: router,\n      modalAbierto: modalAbierto,\n      tareaEdit: tareaEdit,\n      cargar: cargar,\n      crear: crear,\n      actualizar: actualizar,\n      confirmarEliminar: confirmarEliminar,\n      abrirModal: abrirModal,\n      guardarEdicion: guardarEdicion,\n      salir: salir,\n      ref: ref,\n      onMounted: onMounted,\n      TaskForm: TaskForm,\n      get api() {\n        return api;\n      },\n      get logout() {\n        return logout;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","TaskForm","api","logout","useRouter","tasks","router","modalAbierto","tareaEdit","id","titulo","cargar","_cargar","apply","arguments","_asyncToGenerator","_regenerator","m","_callee","_yield$api$get","data","w","_context","n","get","v","value","a","crear","_x","_crear","_callee2","payload","_yield$api$post","_context2","post","unshift","actualizar","_x2","_actualizar","_callee3","_context3","put","concat","confirmarEliminar","_x3","_confirmarEliminar","_callee4","_context4","confirm","filter","t","abrirModal","title","guardarEdicion","_guardarEdicion","_callee5","_yield$api$put","i","_context5","trim","alert","findIndex","salir","push"],"sources":["C:/Users/USER/Desktop/fullstack-vue-tasks/frontend/src/views/DashboardView.vue"],"sourcesContent":["<template>\n  <div class=\"space-y-6\">\n    <!-- Título -->\n    <div class=\"flex items-center justify-between\">\n      <h2 class=\"text-3xl font-bold text-primary\">Panel de Tareas</h2>\n    </div>\n\n    <!-- Formulario -->\n    <TaskForm @created=\"crear\" />\n\n    <!-- Lista -->\n    <div class=\"bg-white rounded-2xl shadow-md p-6\">\n      <h3 class=\"text-xl font-semibold mb-4\">Mis Tareas</h3>\n      <transition-group name=\"fade\" tag=\"ul\" class=\"space-y-3\">\n        <li\n          v-for=\"t in tasks\"\n          :key=\"t.id\"\n          class=\"flex justify-between items-center border border-gray-200 rounded-xl px-4 py-3 hover:bg-gray-50 transition\"\n        >\n          <div class=\"flex items-center gap-3\">\n            <input\n              type=\"checkbox\"\n              v-model=\"t.completed\"\n              @change=\"actualizar(t)\"\n              class=\"w-5 h-5 accent-primary\"\n            />\n            <span\n              :class=\"[\n                'text-lg',\n                t.completed ? 'line-through text-gray-400' : 'text-gray-800',\n              ]\"\n            >\n              {{ t.title }}\n            </span>\n          </div>\n\n          <div class=\"space-x-3\">\n            <button\n              @click=\"abrirModal(t)\"\n              class=\"text-blue-600 hover:text-blue-800 font-medium transition\"\n            >\n              Editar\n            </button>\n            <button\n              @click=\"confirmarEliminar(t.id)\"\n              class=\"text-red-600 hover:text-red-800 font-medium transition\"\n            >\n              Eliminar\n            </button>\n          </div>\n        </li>\n      </transition-group>\n\n      <p v-if=\"tasks.length === 0\" class=\"text-gray-400 text-center mt-4\">\n        No hay tareas todavía. Agrega una nueva ✏️\n      </p>\n    </div>\n\n    <!-- Modal de edición -->\n    <div\n      v-if=\"modalAbierto\"\n      class=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\n    >\n      <div\n        class=\"bg-white rounded-2xl shadow-lg w-full max-w-md p-6 animate-fade-in\"\n      >\n        <h3 class=\"text-xl font-semibold text-primary mb-4\">\n          Editar tarea\n        </h3>\n        <input\n          v-model=\"tareaEdit.titulo\"\n          type=\"text\"\n          placeholder=\"Nuevo título...\"\n          class=\"w-full border rounded-lg p-3 mb-4 focus:ring-2 focus:ring-primary\"\n        />\n        <div class=\"flex justify-end space-x-3\">\n          <button\n            @click=\"modalAbierto = false\"\n            class=\"px-4 py-2 bg-gray-300 rounded-lg hover:bg-gray-400 transition\"\n          >\n            Cancelar\n          </button>\n          <button\n            @click=\"guardarEdicion\"\n            class=\"px-4 py-2 bg-primary text-white rounded-lg hover:opacity-90 transition\"\n          >\n            Guardar\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from \"vue\";\nimport TaskForm from \"@/components/TaskForm.vue\";\nimport api from \"@/services/api\";\nimport { logout } from \"@/stores/auth\";\nimport { useRouter } from \"vue-router\";\n\nconst tasks = ref([]);\nconst router = useRouter();\n\n// Modal\nconst modalAbierto = ref(false);\nconst tareaEdit = ref({ id: null, titulo: \"\" });\n\n// Funciones principales\nasync function cargar() {\n  const { data } = await api.get(\"/tasks\");\n  tasks.value = data;\n}\n\nasync function crear(payload) {\n  const { data } = await api.post(\"/tasks\", payload);\n  tasks.value.unshift(data);\n}\n\nasync function actualizar(payload) {\n  await api.put(`/tasks/${payload.id}`, payload);\n}\n\nasync function confirmarEliminar(id) {\n  if (confirm(\"¿Seguro que deseas eliminar esta tarea?\")) {\n    await api.delete(`/tasks/${id}`);\n    tasks.value = tasks.value.filter((t) => t.id !== id);\n  }\n}\n\n// Modal\nfunction abrirModal(t) {\n  tareaEdit.value = { id: t.id, titulo: t.title };\n  modalAbierto.value = true;\n}\n\nasync function guardarEdicion() {\n  if (!tareaEdit.value.titulo.trim()) return alert(\"El título no puede estar vacío\");\n  const { data } = await api.put(`/tasks/${tareaEdit.value.id}`, {\n    title: tareaEdit.value.titulo,\n  });\n  const i = tasks.value.findIndex((t) => t.id === data.id);\n  if (i !== -1) tasks.value[i] = data;\n  modalAbierto.value = false;\n}\n\nfunction salir() {\n  logout();\n  router.push(\"/login\");\n}\n\nonMounted(cargar);\n</script>\n\n<style scoped>\n.fade-enter-active,\n.fade-leave-active {\n  transition: all 0.3s ease;\n}\n.fade-enter-from,\n.fade-leave-to {\n  opacity: 0;\n  transform: translateY(5px);\n}\n\n.animate-fade-in {\n  animation: fadeIn 0.3s ease forwards;\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n    transform: scale(0.95);\n  }\n  to {\n    opacity: 1;\n    transform: scale(1);\n  }\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}